#!/bin/bash
###########- END COLOR CODE -##########
colornow=$(cat /etc/dvs/theme/color.conf)
NC="\e[0m"
p="\e[0m"
r="\033[0;31m"
y="\033[33m"
gb="\e[92;1m"
RED="\033[0;31m"
COLOR1="$(cat /etc/dvs/theme/$colornow | grep -w "TEXT" | cut -d: -f2|sed 's/ //g')"
COLBG1="$(cat /etc/dvs/theme/$colornow | grep -w "BG" | cut -d: -f2|sed 's/ //g')"
WH='\033[1;37m'
###########- END COLOR CODE -##########
g=$(cat /usr/sbin/mtsc.list | grep "^color" | cut -d " " -f 2)
gb=$(cat /usr/sbin/mtsc.list | grep "^color" | cut -d " " -f 3)
b=$(cat /usr/sbin/mtsc.list | grep "^color" | cut -d " " -f 4)
p=$(cat /usr/sbin/mtsc.list | grep "^color" | cut -d " " -f 5)
r=$(cat /usr/sbin/mtsc.list | grep "^color" | cut -d " " -f 6)
y=$(cat /usr/sbin/mtsc.list | grep "^color" | cut -d " " -f 7)
###### IZIN SC 
ipsaya=$(wget -qO- ipinfo.io/ip)
data_server=$(curl -v --insecure --silent https://google.com/ 2>&1 | grep Date | sed -e 's/< Date: //')
date_list=$(date +"%Y-%m-%d" -d "$data_server")
data_ip="https://raw.githubusercontent.com/DevilsTunnels/permission/main/izin"
checking_sc() {
  useexp=$(wget -qO- $data_ip | grep $ipsaya | awk '{print $3}')
  if [[ $date_list < $useexp ]]; then
    echo -ne
  else
echo -e "${r} ╔═════════════════════════════════════════════════╗${p}"
echo -e "${r}═║                ${b}PERMISSION DENIED ${p}               ${r}║═${p}"
echo -e "${r}═║${y}┌─┐┬ ┬┌┬┐┌─┐┌─┐┌─┐┬─┐┬┌─┐┌┬┐  ┌─┐┬─┐┌─┐┌┬┐┬┬ ┬┌┬┐${p}${r}║═${p}"
echo -e "${r}═║${y}├─┤│ │ │ │ │└─┐│  ├┬┘│├─┘ │   ├─┘├┬┘├┤ │││││ ││││${p}${r}║═${p}"
echo -e "${r}═║${y}┴ ┴└─┘ ┴ └─┘└─┘└─┘┴└─┴┴   ┴   ┴  ┴└─└─┘┴ ┴┴└─┘┴ ┴${p}${r}║═${p}"
echo -e "${r}═║${gb}  POWERRED DEVILSTUNNEL | TELEGRAM: @Rizyul04    ${p}${r}║═${p}"
echo -e "${r} ╚═════════════════════════════════════════════════╝${p}"
echo -e "                 ${y}INFORMASI LISENSI${p}"                 
echo -e "${r}═════════════════════════════════════════════════════${p}"
echo -e "                 IP ${r}$ipsaya${p}"
echo -e "                 ${y}PERIZINAN DITOLAK${p}"
echo -e "    ${y} SCRIPT TIDAK BISA DI GUNAKAN DI VPS ANDA${p}"
echo -e "    ${y} SILAHKAN LAKUKAN REGISTRASI TERLEBIH DAHULU${p}"
echo -e "${r}═════════════════════════════════════════════════════${p}"
echo -e "                 ${gb}KONTAK REGISTRASI${p}"
echo -e "   ${gb}|Telegram: @Rizyul04   | WhatsApp: 085163567549|${p}"
echo -e "${r}═════════════════════════════════════════════════════${p}"
    exit
  fi
}
checking_sc
clear
CHATID=$(grep -E "^#bot# " "/etc/bot/.bot.db" | cut -d ' ' -f 3)
KEY=$(grep -E "^#bot# " "/etc/bot/.bot.db" | cut -d ' ' -f 2)
export TIME="10"
export URL="https://api.telegram.org/bot$KEY/sendMessage"
MYIP=$(wget -qO- ifconfig.me/ip);

colornow=$(cat /etc/ssnvpn/theme/color.conf)
NC="\e[0m"
COLOR1="$(cat /etc/ssnvpn/theme/$colornow | grep -w "TEXT" | cut -d: -f2|sed 's/ //g')"
COLBG1="$(cat /etc/ssnvpn/theme/$colornow | grep -w "BG" | cut -d: -f2|sed 's/ //g')"

mkdir -p /etc/ssnvpn
mkdir -p /etc/ssnvpn/theme

APIGIT=$(cat /etc/ssnvpn/github/api)
EMAILGIT=$(cat /etc/ssnvpn/github/email)
USERGIT=$(cat /etc/ssnvpn/github/username)
    clear
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC} ${COLBG1}              • IPVPS GITHUB API •              ${NC} $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}" 
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"

if [[ -f /etc/ssnvpn/github/api && -f /etc/ssnvpn/github/email && /etc/ssnvpn/github/username ]]; then
   rec="OK"
else
    mkdir /etc/ssnvpn/github > /dev/null 2>&1
fi

read -p " E-mail   : " EMAIL1
if [ -z $EMAIL1 ]; then
echo -e "$COLOR1${NC}   [INFO] Please Input Your Github Email Adress"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}                 • DevilsTun •                 $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e ""
read -n 1 -s -r -p "   Press any key to back on menu"
menu-ip
fi

read -p " Username : " USERNAME1
if [ -z $USERNAME1 ]; then
echo -e "$COLOR1${NC}   [INFO] Please Input Your Github Username"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}                 • DevilsTun •                 $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e ""
read -n 1 -s -r -p "   Press any key to back on menu"
menu-ip
fi

read -p " API      : " API1
if [ -z $API1 ]; then
echo -e "$COLOR1${NC}  [INFO] Please Input Your Github API"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}                 • DevilsTun •                 $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e ""
read -n 1 -s -r -p "  Press any key to back on menu"
menu-ip
fi

sleep 2
echo "$EMAIL1" > /etc/ssnvpn/github/email
echo "$USERNAME1" > /etc/ssnvpn/github/username
echo "$API1" > /etc/ssnvpn/github/api
echo "ON" > /etc/ssnvpn/github/gitstat
clear
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC} ${COLBG1}               • REGISTER IPVPS •              ${NC} $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}" 
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}   [INFO] Github Api Setup Successfully"
echo -e "$COLOR1${NC}"
echo -e "$COLOR1${NC}   • Email : $EMAIL1"
echo -e "$COLOR1${NC}   • User  : $USERNAME1"
echo -e "$COLOR1${NC}   • API   : $API1"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}                 • DevilsTun •                 $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e ""
read -n 1 -s -r -p "   Press any key to back on menu"
menu-ip
}

function viewapi(){
    clear
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC} ${COLBG1}             • LIST REGISTER IP •              ${NC} $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}" 
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}  • Email : $EMAILGIT"
echo -e "$COLOR1${NC}  • User  : $USERGIT"
echo -e "$COLOR1${NC}  • API   : $APIGIT"
echo -e "$COLOR1${NC}  • All U need Is Create a new repository "
echo -e "$COLOR1${NC}    & Nammed : permission "
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}                 • DevilsTun •                 $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e ""
read -n 1 -s -r -p "   Press any key to back on menu"
menu-ip
}

function add_ip(){
clear
CHATID=$(grep -E "^#bot# " "/etc/bot/.bot.db" | cut -d ' ' -f 3)
KEY=$(grep -E "^#bot# " "/etc/bot/.bot.db" | cut -d ' ' -f 2)
TIME="10"
URL="https://api.telegram.org/bot$KEY/sendMessage"
link="wget --no-check-certificate https://raw.githubusercontent.com/DevilsTunnels/dvs/main/dvs.sh && chmod +x dvs.sh && ./dvs.sh "

echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC} ${COLBG1}               • REGISTER IPVPS •              ${NC} $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}" 
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
rm -rf /root/access
read -p "  NEW IPVPS : " daftar
echo -e "$COLOR1${NC}"
echo -e "$COLOR1${NC}  [INFO] Checking the IPVPS!"
sleep 1
akuIP=$(curl -sS https://raw.githubusercontent.com/${USERGIT}/access/main/name | awk '{print $4}' | grep $daftar)
if [[ $daftar = $akuIP ]]; then
echo -e "$COLOR1${NC}  [INFO] VPS IP Already Registered!!"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}                 • DevilsTun •                 $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e ""
read -n 1 -s -r -p "   Press any key to back on menu"
menu-ip
else
echo -e "$COLOR1${NC}  [INFO] OK! IP VPS is not Registered!"
echo -e "$COLOR1${NC}  [INFO] Lets Regester it!"
sleep 3
clear
fi
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC} ${COLBG1}               • REGISTER IPVPS •              ${NC} $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}" 
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
read -p "  User Name  : " client
if [ -z $client ]; then
cd
echo -e "$COLOR1${NC}  [INFO] Please Input client"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}                 • DevilsTun •                 $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e ""
read -n 1 -s -r -p "   Press any key to back on menu"
menu-ip
fi


read -p "  EXP Date   : " exp
if [ -z $exp ]; then
cd
echo -e "$COLOR1${NC}   [INFO] Please Input exp date"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}                 • DevilsTun •                 $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e ""
read -n 1 -s -r -p "   Press any key to back on menu"
menu-ip
fi

x="ok"

satu="ON"
dua="OFF"
while true $x != "ok"
do
echo -e "$COLOR1${NC}"
echo -e "$COLOR1${NC}  ${COLOR1}[01]${NC} • ADMIN   ${COLOR1}[02]${NC} • NORMAL"
echo -e "$COLOR1${NC}"
echo -ne "  Input your choice : "; read list
echo ""
case "$list" in 
   1) isadmin="$satu";break;;
   2) isadmin="$dua";break;;
esac
done


exp=$(date -d "$exp days" +"%Y-No such file or directory-20")
hariini=$(date -d "0 days" +"%Y-No such file or directory-4")
git config --global user.email "${EMAILGIT}" &> /dev/null
git config --global user.name "${USERGIT}" &> /dev/null
git clone https://github.com/${USERGIT}/access.git &> /dev/null
cd /root/access/ &> /dev/null
rm -rf .git &> /dev/null
git init &> /dev/null
touch ip &> /dev/null
touch newuser &> /dev/null
TEXT="
Name        : $client 
Admin Panel : $isadmin
Exp         : $exp 
IPVPS       : $daftar 
Reg Date    : $hariini
" 

echo "${TEXT}" >>/root/access/newuser 
echo "### $client $exp $daftar" >>/root/access/name 
git add .
git commit -m register &> /dev/null
git branch -M main &> /dev/null
git remote add origin https://github.com/${USERGIT}/access.git &> /dev/null
git push -f https://${APIGIT}@github.com/${USERGIT}/access.git &> /dev/null
sleep 1

clear
CHATID="$CHATID"
KEY="$KEY"
TIME="$TIME"
URL="$URL"
TEXT="
<code>◇━━━━━━━━━━━━━━◇</code>
<b>  ☘️SUCCES REGIS IP☘️</b>
<code>◇━━━━━━━━━━━━━━◇</code>
<b>🔰Username :</b> <code>${client}</code>
<b>🔰IP VPS  : </b> <code>${daftar} </code>
<b>🔰Tanggal : </b> <code>$hariini</code>
<b>🔰EXP     : </b> <code>$exp</code>
<code>◇━━━━━━━━━━━━━━◇</code>
<b>🔰Link Instal : wget --no-check-certificate https://raw.githubusercontent.com/DevilsTunnels/dvs/main/dvs.sh && chmod +x dvs.sh && ./dvs.sh </b>
<code>◇━━━━━━━━━━━━━━◇</code>"
echo ""
clear
echo -e " $COLOR1◇━━━━━━━━━━━━━━━━━━◇${NC}"
echo -e " $COLOR1 ${NC} ☘️ NEW IP REGISTER ☘️"
echo -e " $COLOR1◇━━━━━━━━━━━━━━━━━━◇${NC}"
echo -e " $COLOR1 ${NC} ⚡USERNAME   : $client"
echo -e " $COLOR1 ${NC} ⚡HOST/IP    : $daftar"
echo -e " $COLOR1 ${NC} ⚡TGL DAFTAR : $hariini"
echo -e " $COLOR1 ${NC} ⚡Expired    : $exp"
echo -e " $COLOR1◇━━━━━━━━━━━━━━━━━━◇${NC}"
echo -e " $COLOR1  ${NC} 🔰 Link install 🔰${NC}"
echo -e " [ wget --no-check-certificate wget --no-check-certificate https://raw.githubusercontent.com/DevilsTunnels/scvps/main/dvs.sh && chmod +x dvs.sh && ./dvs.sh  ] ${NC}"
cd
rm -rf /root/access/name
echo -e " $COLOR1◇━━━━━━━━━━━━━━━━━━◇${NC}" 
echo -e "$COLOR1${NC}    • DevilsTun •    $COLOR1$NC"
echo -e " $COLOR1◇━━━━━━━━━━━━━━━━━━◇${NC}" 
echo ""
read -n 1 -s -r -p "   Press any key to back on menu"
menu-ip
}
function delipvps(){
clear
rm -rf /root/access &> /dev/null
git config --global user.email "${EMAILGIT}" &> /dev/null
git config --global user.name "${USERGIT}" &> /dev/null
git clone https://github.com/${USERGIT}/access.git &> /dev/null
cd /root/access/ &> /dev/null
rm -rf .git &> /dev/null
git init &> /dev/null
touch izin &> /dev/null
clear
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC} ${COLBG1}                 • DELETE IPVPS •              ${NC} $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}" 
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
grep -E "^### " "/root/access/name" | cut -d ' ' -f 2-4 | nl -s '. '
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}                 • DevilsTun •                 $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo ""
read -rp "   Please Input Number : " nombor
if [ -z $nombor ]; then
cd
clear
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC} ${COLBG1}                 • DELETE IPVPS •              ${NC} $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}" 
echo -e "$COLOR1${NC}   [INFO] Please Input Correct Number"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}                 • DevilsTun •                 $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e ""
read -n 1 -s -r -p "   Press any key to back on menu"
menu-ip
fi

name1=$(grep -E "^### " "/root/access/name" | cut -d ' ' -f 2 | sed -n "$nombor"p) #name
exp=$(grep -E "^### " "/root/access/name" | cut -d ' ' -f 3 | sed -n "$nombor"p) #exp
ivps1=$(grep -E "^### " "/root/access/name" | cut -d ' ' -f 4 | sed -n "$nombor"p) #izin
sed -i "s/### $name1 $exp $ivps1//g" /root/access/name &> /dev/null
hariini2=$(date -d "0 days" +"%Y-No such file or directory-1")
TEXTD="
Name     : $name1
IPVPS    : $ivps1  
Status   : Deleted on  $hariini2
" 
echo "${TEXTD}" >>/root/access/delete_log  &> /dev/null

git add . &> /dev/null
git commit -m remove &> /dev/null
git branch -M main &> /dev/null
git remote add origin https://github.com/${USERGIT}/access.git &> /dev/null
git push -f https://${APIGIT}@github.com/${USERGIT}/access.git &> /dev/null
clear
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC} ${COLBG1}               • REGISTER IPVPS •              ${NC}"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}" 
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}  Client IP Deleted Successfully"
echo -e "$COLOR1${NC}"
echo -e "$COLOR1${NC}  Ip VPS       : $ivps1"
echo -e "$COLOR1${NC}  Expired Date : $exp"
echo -e "$COLOR1${NC}  Client Name  : $name1"
cd
rm -rf /root/access
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}                 • DevilsTun •                 $NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo ""
read -n 1 -s -r -p "   Press any key to back on menu"
menu-ip
}

function renewipvps(){
 clear
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC} ${COLBG1}               • REGISTER IPVPS •              ${NC} $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}" 
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
rm -rf /root/access
git config --global user.email "${EMAILGIT}" &> /dev/null
git config --global user.name "${USERGIT}" &> /dev/null
git clone https://github.com/${USERGIT}/access.git
cd /root/access
rm -rf .git
git init
touch izin
echo -e "   [ ${Lyellow}INFO${NC} ] Checking list.."

NUMBER_OF_CLIENTS=$(grep -c -E "^### " "/root/access/name")
if [[ ${NUMBER_OF_CLIENTS} == '0' ]]; then
  clear
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC} ${COLBG1}               • REGISTER IPVPS •              ${NC} $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}" 
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}   [INFO] You have no existing clients!"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}                 • DevilsTun •                 $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo ""
read -n 1 -s -r -p "   Press any key to back on menu"
menu-ip
fi
clear
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC} ${COLBG1}               • REGISTER IPVPS •              ${NC} $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}" 
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
grep -E "^### " "/root/access/name" | cut -d ' ' -f 2-4 | nl -s '. '
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}                 • DevilsTun •                 $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e ""
until [[ ${CLIENT_NUMBER} -ge 1 && ${CLIENT_NUMBER} -le ${NUMBER_OF_CLIENTS} ]]; do
  if [[ ${CLIENT_NUMBER} == '1' ]]; then
    read -rp " Select one client [1]: " CLIENT_NUMBER
  else
    read -rp " Select one client [1-${NUMBER_OF_CLIENTS}]: " CLIENT_NUMBER
  fi
if [ -z $CLIENT_NUMBER ]; then
cd
clear
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC} ${COLBG1}               • REGISTER IPVPS •              ${NC} $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}" 
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}   [INFO] Please Input Correct Number"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}                 • DevilsTun •                 $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e ""
read -n 1 -s -r -p "   Press any key to back on menu"
menu-ip
fi
done
echo -e ""
read -p " Expired (days): " masaaktif
if [ -z $masaaktif ]; then
cd
clear
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC} ${COLBG1}               • REGISTER IPVPS •              ${NC} $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}" 
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}  [INFO] Please Input Correct Number"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}                 • DevilsTun •                 $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e ""
read -n 1 -s -r -p "   Press any key to back on menu"
menu-ip
fi
name1=$(grep -E "^### " "/root/access/name" | cut -d ' ' -f 2 | sed -n "${CLIENT_NUMBER}"p) #name
exp=$(grep -E "^### " "/root/access/name" | cut -d ' ' -f 3 | sed -n "${CLIENT_NUMBER}"p) #exp
ivps1=$(grep -E "^### " "/root/access/name" | cut -d ' ' -f 4 | sed -n "${CLIENT_NUMBER}"p) #ip

now=$(date +%Y-No such file or directory-0)
d1=$(date -d "$exp" +��Rk�)
d2=$(date -d "$now" +��Sk�)
exp2=$(((d1 - d2) / 86400))
exp3=$(($exp2 + $masaaktif))
exp4=$(date -d "$exp3 days" +"%Y-No such file or directory-0")
sed -i "s/### $name1 $exp $ivps1/### $name1 $exp4 $ivps1/g" /root/access/name
git add .
git commit -m renew
git branch -M main
git remote add origin https://github.com/${USERGIT}/access.git
git push -f https://${APIGIT}@github.com/${USERGIT}/access.git
clear
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC} ${COLBG1}               • REGISTER IPVPS •              ${NC} $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}" 
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}  Client IP VPS Renew Successfully"
echo -e "$COLOR1${NC}"
echo -e "$COLOR1${NC}  Ip VPS        : $ivps1"
echo -e "$COLOR1${NC}  Renew Date    : $now"
echo -e "$COLOR1${NC}  Days Added    : $masaaktif Days"
echo -e "$COLOR1${NC}  Expired Date  : $exp4"
echo -e "$COLOR1${NC}  Client Name   : $name1"
cd
rm -rf /root/access
echo -e "$COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}                 • DevilsTun •                 $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo ""
read -n 1 -s -r -p "   Press any key to back on menu"
menu-ip
}

function useripvps(){
clear
rm -rf /root/access
git config --global user.email "${EMAILGIT}"
git config --global user.name "${USERGIT}"
git clone https://github.com/${USERGIT}/access.git
cd /root/access/
rm -rf .git
git init
touch izin
clear
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC} ${COLBG1}               • REGISTER IPVPS •              ${NC} $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}" 
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
grep -E "^### " "/root/access/name" | cut -d ' ' -f 2 | nl -s '. '
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}                 • DevilsTun •                 $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
cd
rm -rf /root/access
echo -e ""
read -n 1 -s -r -p "   Press any key to back on menu"
menu-ip
}
function resetipvps(){
clear
rm -f /etc/ssnvpn/github/email
rm -f /etc/ssnvpn/github/username
rm -f /etc/ssnvpn/github/api
rm -f /etc/ssnvpn/github/gitstat
echo "OFF" > /etc/ssnvpn/github/gitstat
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC} ${COLBG1}              • RESET GITUB API •              ${NC} $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}" 
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}  [INFO] Github API Reseted Successfully"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}                 • DevilsTun •                 $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e ""
read -n 1 -s -r -p "   Press any key to back on menu"
menu-ip  
}
Isadmin=$(curl -sS https://raw.githubusercontent.com/claudialubowitz26/permission/main/izin | grep $MYIP | awk '{print $5}')
if [ "$Isadmin" = "OFF" ]; then
clear
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC} ${COLBG1}            • PREMIUM USER ONLY •              ${NC} $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}" 
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC} [INFO] Only PRO Users Can Use This Panel"
echo -e "$COLOR1${NC} [INFO] Buy Premium Membership : t.me/______"
echo -e "$COLOR1${NC} [INFO] SCRIPT BY : Tekiro VPN ®"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}                 • DevilsTun •                 $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e ""
read -n 1 -s -r -p "   Press any key to back on menu"
menu-ip  
fi
clear
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC} ${COLBG1}               • REGISTER IPVPS •              ${NC} $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}" 
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
GITaku=/etc/ssnvpn/github/gitstat
if [ -f "$GITaku" ]; then
    cekk="ok"
else 
    mkdir /etc/ssnvpn/github
    touch /etc/ssnvpn/github/gitstat
    echo "OFF" > /etc/ssnvpn/github/gitstat
fi

stst1=$(cat /etc/ssnvpn/github/gitstat)
if [ "$stst1" = "OFF" ]; then
clear
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC} ${COLBG1}               • REGISTER IPVPS •              ${NC} $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}" 
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}   • You Need To Set Github API First!"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}                 • DevilsTun •                 $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e ""
read -n 1 -s -r -p "   Press any key to Set API"
setapi
fi
stst=$(cat /etc/ssnvpn/github/gitstat)
if [ "$stst" = "ON" ]; then
APIOK="CEK API"
rex="viewapi"
else
APIOK="SET API"
rex="setapi"
fi
if [ "$stst" = "ON" ]; then
ISON="RESET API"
ressee="resetipvps"
else
ISON=""
ressee="menu-ip"
fi
echo -e "   $COLOR1 [01]$NC • ADD IPVPS      $COLOR1 [03]$NC • RENEW IPVPS"
echo -e "   $COLOR1 [02]$NC • DELETE IPVPS   $COLOR1 [04]$NC • LIST IPVPS"
echo -e "   "
echo -e "   $COLOR1 [00]$NC • GO BACK"

echo -e "$COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e " $COLOR1╭═════════════════════════════════════════════════╮${NC}"
echo -e "$COLOR1${NC}                 • DevilsTun •                 $COLOR1$NC"
echo -e " $COLOR1╰═════════════════════════════════════════════════╯${NC}"  
echo -e ""
read -p " Select menu :  "  opt
echo -e   ""
case $opt in
01 | 1) clear ; add_ip ;;
02 | 2) clear ; delipvps ;;
03 | 3) clear ; renewipvps ;;
04 | 5) clear ; useripvps ;;
00 | 0) clear ; menu ;;
*) clear ; menu-ip ;;
esac